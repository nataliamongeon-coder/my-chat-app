<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极简实时聊天室</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f4f7f6; display: flex; flex-direction: column; align-items: center; height: 100vh; margin: 0; padding: 20px; }
        
        /* 聊天主容器 */
        #chat-container { width: 100%; max-width: 500px; background: white; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: flex; flex-direction: column; overflow: hidden; height: 80vh; }
        
        /* 消息显示区 */
        #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        
        /* 气泡样式 */
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 18px; font-size: 14px; line-height: 1.5; word-wrap: break-word; background: #e9ecef; align-self: flex-start; }
        
        /* 输入区 */
        .input-area { display: flex; padding: 15px; border-top: 1px solid #eee; background: #fff; }
        input { flex: 1; border: 1px solid #ddd; padding: 12px 15px; border-radius: 25px; outline: none; transition: border 0.3s; }
        input:focus { border-color: #007bff; }
        button { background: #007bff; color: white; border: none; padding: 0 20px; margin-left: 10px; border-radius: 25px; cursor: pointer; font-weight: bold; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <div id="chat-container">
        <div id="chat-box"></div>
        <div class="input-area">
            <input type="text" id="msg-input" placeholder="输入消息..." autocomplete="off">
            <button onclick="send()">发送</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const chatBox = document.getElementById('chat-box');
        const input = document.getElementById('msg-input');

        // 发送逻辑
        function send() {
            const text = input.value;
            if (text.trim() !== '') {
                socket.emit('send message', text); 
                input.value = '';
            }
        }

        // 监听回车键
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') send();
        });

        // 接收逻辑
        socket.on('receive message', (data) => {
            const div = document.createElement('div');
            div.className = 'msg';
            div.textContent = data;
            chatBox.appendChild(div);
            // 自动滚动到最新消息
            chatBox.scrollTop = chatBox.scrollHeight;
        });
    </script>
</body>
</html>